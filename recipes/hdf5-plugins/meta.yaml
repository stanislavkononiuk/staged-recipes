{% set name = "hdf5-plugins" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  git_url: https://github.com/nexusformat/HDF5-External-Filter-Plugins.git
  git_rev: {{ version }}
  patches:
    - plugindir.patch

build:
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - bzip2 >= 1.0.6
  host:
    - bzip2 >= 1.0.6
    - lz4
    - lz4-c
  run:
    - bzip2
    - hdf5
    - lz4

test:
  commands:
    - conda inspect linkages -p $PREFIX hdf5_plugins

about:
  home: https://github.com/nexusformat/HDF5-External-Filter-Plugins
  # Remember to specify the license variants for BSD, Apache, GPL, and LGPL.
  # Prefer the short version, e.g: GPL-2.0 instead of GNU General Public License version 2.0
  # See https://opensource.org/licenses/alphabetical
  #license: MIT
  # The license_family, i.e. "BSD" if license is "BSD-3-Clause". (optional)
  #license_family: MIT
  # It is strongly encouraged to include a license file in the package,
  # (even if the license doesn't require it) using the license_file entry.
  # See http://conda.pydata.org/docs/building/meta-yaml.html#license-file
  license_file: resources/LICENSE.txt
  summary: |
    Provides dynamically loadable compression filters for HDF5 that are
    popular for photon or neutron science
  description: |
    The external filter mechanism introduced with HDF5 1.8.12 allows
    applications to utilize custom filters not shipped by the HDF5
    core library without recompiling your application. This package
    provides external filters for HDF5 for the LZ4 compression algorithm,
    BZip2 compression, and the BLOSC library.
  doc_url: https://github.com/nexusformat/HDF5-External-Filter-Plugins
  dev_url: https://github.com/nexusformat/HDF5-External-Filter-Plugins

extra:
  recipe-maintainers:
    - Anthchirp
