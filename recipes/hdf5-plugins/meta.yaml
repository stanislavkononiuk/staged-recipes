{% set name = "hdf5-plugins" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/nexusformat/HDF5-External-Filter-Plugins/archive/v{{ version }}.tar.gz
  sha256: 3d0d93cb71e1f384e827fbc9808d72b0984195ab337cca697c66205e7c135b0d
  patches:
    - patches/0001-set-lib-directory.patch

build:
  skip: True  # [win]
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake >=3.0.0
  host:
    - bzip2 >=1.0.6
    - hdf5
    - lz4-c
    - zlib
  run:
    - bzip2
    - hdf5
    - lz4-c
    - zlib

test:
  commands:
    - conda inspect linkages -p $PREFIX hdf5_plugins

about:
  home: https://github.com/nexusformat/HDF5-External-Filter-Plugins
  license: various
  license_family: OTHER
  license_file: resources/LICENSE.txt
  summary: |
    Provides dynamically loadable compression filters for HDF5 that are
    popular for photon or neutron science
  description: |
    The external filter mechanism introduced with HDF5 1.8.12 allows
    applications to utilize custom filters not shipped by the HDF5
    core library without recompiling your application. This package
    provides external filters for HDF5 for the LZ4 compression algorithm,
    BZip2 compression, and the BLOSC library.
  doc_url: https://github.com/nexusformat/HDF5-External-Filter-Plugins
  dev_url: https://github.com/nexusformat/HDF5-External-Filter-Plugins

extra:
  recipe-maintainers:
    - Anthchirp
