{% set version = "0.5.1" %}
{% set data = load_setup_py_data() %}

source:
  url: https://pypi.io/packages/source/p/pymor/pymor-{{ version }}.zip
  sha256: ad5d0e8db09bf65580563632f5a73403790672f8ab33bc943da344fe70d290a0

build:
  number: 1
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vvv"

package:
    name: pymor
    version: {{ version }}

requirements:
  build:
    - {{ compiler('c') }}

  host:
    - python
    - pip
    {% for dep in data['setup_requires'] %}
    - {{ dep.lower() }}
    {% endfor %}

  run:
    - python
    {% for dep in data['install_requires'] %}
    - {{ dep.lower() }}
    {% endfor %}

test:
  requires:
    {% for dep in data['tests_require'] %}
    - {{ dep.lower() }}
    {% endfor %}

  commands:
    - py.test -r sxX

  imports:
    - pymor
    - pymordemos

about:
  home: {{ data['url'] }}
  license: {{ data['license'] }}
  summary: {{ data['description'] }}

extra:
  recipe-maintainers:
    - renefritze
