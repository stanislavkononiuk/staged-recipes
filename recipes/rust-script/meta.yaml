{% set version = "0.14.0" %}
{% set sha256 = "a368e0d529ddcb7f7cfa561df942497c568760d195847d2ea9b08cf169cb501c" %}

package:
  name: rust-script
  version: {{ version }}

source:
  url: https://github.com/fornwall/rust-script/archive/refs/tags/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  script:
    - 'cargo install --no-track --locked --verbose --root "${PREFIX}" --path .'  # [not win]
    - 'cargo install --no-track --locked --verbose --root "%PREFIX%" --path .'   # [win]

requirements:
  build:
    - {{ compiler('rust') }}
  host:
  run:

test:
  commands:
    - rust-script --version | grep -qF '{{ version }}'

about:
  home: https://rust-script.org
  license: MIT AND Apache-2.0
  license_file:
    - LICENSE-MIT
    - LICENSE-APACHE
  summary: 'Run Rust files and expressions without any setup or compilation necessary.'
  description: |
    With rust-script Rust files and expressions can be executed just like a shell or Python script. Features include:
    - Caching compiled artifacts for speed.
    - Reading Cargo manifests embedded in Rust scripts.
    - Supporting executable Rust scripts via Unix shebangs and Windows file associations.
    - Using expressions as stream filters (i.e. for use in command pipelines).
    - Running unit tests and benchmarks from scripts.
    - Custom templates for command-line expressions and filters.

  doc_url: https://rust-script.org/
  dev_url: https://github.com/fornwall/rust-script

extra:
  recipe-maintainers:
    - tedil
