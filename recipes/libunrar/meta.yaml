{% set name = "libunrar" %}
{% set version = "6.2.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://www.rarlab.com/rar/unrarsrc-{{ version }}.tar.gz
  sha256: 120936e41f826cd63d77a580aeea64c1b79fd3e2434f58ce8184e783b51e5b01
  patches:
    - 0001-REMOVE-HARDCODED-MAKEFILE-ENV.patch  # [unix]
    - 0002-REMOVE-INSTALL-OPTION.patch  # [osx]
    - 0003-CHANGE-DYLIB-EXTENSION.patch  # [osx]

build:
  run_exports:
    - {{ pin_subpackage('libunrar', exact=True) }}
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - make  # [unix]

test:
  commands:
    - unrar

    # CFEP-18
    - test ! -f ${PREFIX}/lib/libunrar.a  # [unix]

about:
  home: https://www.rarlab.com/
  summary: 'Free utility for RAR archives'
  description: ''
  license: LicenseRef-UnRAR
  license_file: license.txt
  dev_url: https://www.rarlab.com/rar_add.htm

extra:
  recipe-maintainers:
    - sshockwave
