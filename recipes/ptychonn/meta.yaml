{% set name = "PtychoNN" %}
{% set version = "0.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/mcherukara/PtychoNN/archive/v{{ version }}.tar.gz
  sha256: da0c5c15ba3bd6e2cec3c27f9fbaad25ac7fd1e23df407911b41dd5052638063

build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  host:
    - pip
    - python >=3.6
    - setuptools >=45
    - setuptools_scm
    - setuptools_scm_git_archive
    - toml
  run:
    - click
    - h5py
    - importlib-metadata
    - importlib-resources
    - matplotlib
    - numpy >=1.21,<2
    - python >=3.6
    - pytorch
    - scikit-image
    - scipy
    - tqdm

test:
  imports:
    - ptychonn
  requires:
    - pip
  commands:
    - pip check
    - ptychonn --help

about:
  home: https://github.com/mcherukara/PtychoNN
  summary: Deep learning of ptychographic imaging
  description: >
    PtychoNN is a two-headed encoder-decoder network that simultaneously
    predicts sample amplitude and phase from input diffraction data alone.
    PtychoNN is 100s of times faster than iterative phase retrieval and can
    work with as little as 25X less data.

    Companion repository to the paper at: https://aip.scitation.org/doi/full/10.1063/5.0013065

  # Remember to specify the license variants for BSD, Apache, GPL, and LGPL.
  # Use the SPDX identifier, e.g: GPL-2.0-only instead of GNU General Public License version 2.0
  # See https://spdx.org/licenses/
  license: MIT
  # The license_family, i.e. "BSD" if license is "BSD-3-Clause".
  # Optional
  license_family: MIT
  # It is required to include a license file in the package,
  # (even if the license doesn't require it) using the license_file entry.
  # Please also note that some projects have multiple license files which all need to be added using a valid yaml list.
  # See https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html#license-file
  license_file: LICENSE.txt
  dev_url: https://github.com/mcherukara/PtychoNN

extra:
  recipe-maintainers:
    - carterbox
    - mcherukara
    - vbanakha
