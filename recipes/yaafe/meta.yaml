{% set name = "Yaafe" %}
{% set version = "0.70" %}
{% set md5 = "" %}


package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  # fn: {{ name }}-{{ version }}.tar.gz
  # url: https://github.com/{{ name }}/{{ name }}/archive/{{ version }}-rc1.tar.gz
  # md5: {{ md5 }}
  fn: {{ name }}-{{ version }}.zip
  url: https://github.com/hbredin/Yaafe/archive/feature/py3_support.zip
  # url: https://github.com/louisabraham/Yaafe/archive/master.zip

build:
  rpaths:
    - lib/
  number: 0
  skip: true  # [win]

requirements:
  build:
    - python
    - hdf5
    - gcc
    - eigen
    - fftw
    - libsndfile
    - mpg123
    - argtable2
    - cmake
    - lapack

  run:
    - python
    - hdf5
    - libgcc
    - eigen
    - fftw
    - libsndfile
    - mpg123
    - argtable2
    - lapack


test:
  files:
    - yaafe_check.wav
    - featureplan

  imports:
    - yaafelib

  commands:
    - yaafe -h
    - yaafe -l
    - yaafe -c featureplan  -r 32000 -o h5 yaafe_check.wav
    - yaafe -c featureplan  -r 32000 -o csv yaafe_check.wav

about:
  home: https://github.com/Yaafe/Yaafe
  license: LGPL-3
  license_family: LGPL
  license_file: '{{ environ["RECIPE_DIR"] }}/LICENSE'
  summary: "Yaafe - audio features extraction"

extra:
    recipe-maintainers:
        - thomasfillon
        - hbredin
