{% set name = "pyebsdindex" %}
{% set version = "0.1rc2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/pyebsdindex-{{ version }}.tar.gz
  sha256: 5a7a5e6ca7ea331160cd3cdaff02e7744c42464cfc8233bb6808449e86c2d0a6

build:
  script: {{ PYTHON }} -m pip install . -vv
  number: 0
  # Skip macOS until ray-default is available for macOS or the package becomes
  # an optional dependency of PyEBSDIndex
  skip: true  # [osx]
  skip: true  # [py<38]

requirements:
  host:
    - pip
    - python
  run:
    - h5py
    - jupyterlab
    - matplotlib-base
    - numba
    - numpy
    - ocl-icd-system  # [unix]
    - pyopencl
    - pyswarms
    - python
    - ray-default
    - scipy

test:
  requires:
    - pytest
  imports:
    - pyebsdindex
    - pyebsdindex.ebsd_index
    - pyebsdindex.nlpar
    - pyebsdindex.pcopt
  commands:
    - pytest --pyargs pyebsdindex

about:
  home: https://pyebsdindex.readthedocs.io
  license_file: License
  summary: Python based tool for Hough/Radon based EBSD indexing
  doc_url: https://pyebsdindex.readthedocs.io
  dev_url: https://github.com/USNavalResearchLaboratory/PyEBSDIndex

extra:
  recipe-maintainers:
    - drowenhorst-nrl
    - hakonanes
