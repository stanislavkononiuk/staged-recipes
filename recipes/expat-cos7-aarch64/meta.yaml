{% set arch = "aarch64" %}
{% set cos = "cos7" %}
{% set url_base = "http://mirror.centos.org/altarch/7/os/aarch64/Packages/" %}

package:
  name: expat-{{ cos }}-{{ arch }}
  version: 2.0.1

source:
  - url: {{ url_base }}expat-2.1.0-10.el7_3.aarch64.rpm
    sha256: f5313d176b7ea683b1abdf3152d6bee22903628b99e9d07372377985a1d25edb
    # conda seems to remove folders if they are the only ones there
    # we need to keep the structure of the RPM
    # https://github.com/conda/conda-build/issues/3595
    folder: binary/usr

build:
  number: 0
  noarch: generic
  missing_dso_whitelist:
    - '*'
  script:
    - mkdir -p {{ PREFIX }}/{{ arch }}-conda_{{ cos }}-linux-gnu/sysroot
    - pushd {{ PREFIX }}/{{ arch }}-conda_{{ cos }}-linux-gnu/sysroot > /dev/null 2>&1
    - cp -Rf {{ SRC_DIR }}/binary/* .

test:
  commands:
    - test -f "${PREFIX}/{{ arch }}-conda_{{ cos }}-linux-gnu/sysroot/usr/bin/xmlwf"


about:
  home: http://www.libexpat.org/
  license: MIT
  license_family: MIT
  license_file: binary/usr/share/doc/expat-2.1.0/COPYING
  summary: "(CDT) An XML parser library"

extra:
  recipe-maintainers:
    - hmaarrfk
