diff --git a/asciidoc.py b/asciidoc.py
index 09692b0..db9c22d 100755
--- a/asciidoc.py
+++ b/asciidoc.py
@@ -6210,6 +6210,9 @@ def execute(cmd,opts,args):
         sys.stdin,sys.stdout = stdin,stdout
 
 if __name__ == '__main__':
+    main()
+
+def main():
     # Process command line options.
     import getopt
     try:
