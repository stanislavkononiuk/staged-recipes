{% set name = "puma" %}
{% set version = "3.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://gitlab.com/jcfergus/puma-dev/-/archive/v{{ version }}/puma-dev-v{{ version }}.tar.gz
  sha256: d8b7416c9089744c6ba421b0591e3721a315a1a3e91bb7696d324a1805488f4a

build:
  number: 0
  skip: True  # [win and linux]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}  # [linux]
    - {{ cdt('libxdamage') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libxext') }}     # [linux]
    - llvm-openmp  # [osx]
    - libgomp  # [linux]
    - python
    - cmake
    - make
    - eigen
    - fftw
    - libtiff ==4.1.0
    - swig
    - qt
  host:
    - xorg-libxfixes  # [linux]
    - python
    - pip
    - numpy
    - scipy
    - scikit-image
    - matplotlib
    - ipympl
    - pyevtk
    - visvis
    - eigen
    - fftw
    - libtiff
    - pyqt
    - qt
  run:
    - python
    - {{ pin_compatible('numpy') }}
    - scipy
    - scikit-image
    - matplotlib
    - ipympl
    - pyevtk
    - visvis
    - eigen
    - fftw
    - libtiff
    - pyqt
    - qt

test:
  imports:
    - TexGen.Core
    - pumapy
  source_files:
    - python/tests/*.py

about:
  home: https://github.com/nasa/puma
  license: NASA-1.3
  license_file: 
    - LICENSE.txt
    - install/TexGen/LICENSE.txt
    - gui/src/Utilities/qcustomplot/GPL.txt
  summary: 'A package to compute material properties from micro-CT data.'
  description: |
    The Porous Microstructure Analysis (PuMA) software has been developed in order to 
    compute effective material properties and perform material response simulations on 
    digitized microstructures of porous media. PuMA is able to import digital three-dimensional 
    images obtained from X-ray microtomography or to generate artificial microstructures 
    that mimic real materials. PuMA also provides a module for interactive 3D visualizations. 
    Version 3 includes modules to compute simple morphological properties such as porosity, 
    volume fractions, pore diameter, and specific surface area. Additional capabilities include 
    the determination of effective thermal and electrical conductivity (including the ability 
    to simulate local anisotropy), effective diffusivity and tortuosity from the continuum to 
    the rarefied regime, and techniques to determine local material orientation.
  doc_url: https://puma-nasa.readthedocs.io/
  dev_url: https://gitlab.com/jcfergus/puma-dev

extra:
  recipe-maintainers:
    - fsemerar
