{% set name = "puma" %}
{% set version = "3.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://gitlab.com/jcfergus/puma-dev/-/archive/v{{ version }}/puma-dev-v{{ version }}.tar.gz
  sha256: 8f5fc2050d3d8b46638763661025c3b00c68c153a91bd143925257a0c65a3a0a

build:
  number: 0
  skip: True  # [win and linux]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}  # [linux]
    - {{ cdt('libxdamage') }}  # [linux]
    - {{ cdt('libxxf86vm') }}  # [linux]
    - {{ cdt('libxext') }}     # [linux]
    - llvm-openmp  # [osx]
    - libgomp  # [linux]
    - python
    - setuptools
    - cython
    - numpy
    - cmake
    - make
    - eigen
    - fftw
    - openmp
    - libtiff ==4.1.0
    - swig
    - pyqt
  host:
    - xorg-libxfixes  # [linux]
    - python
    - numpy
    - scipy
    - scikit-image
    - scikit-umfpack
    - matplotlib
    - ipympl
    - pyevtk
    - visvis
    - eigen
    - fftw
    - openmp
    - libtiff
    - pyqt
    - paraview ==5.7.0  # [osx]
    - paraview ==5.8.1  # [linux]
    - fenics-dolfin
  run:
    - python
    - numpy
    - scipy
    - scikit-image
    - scikit-umfpack
    - matplotlib
    - ipympl
    - pyevtk
    - visvis
    - eigen
    - fftw
    - openmp
    - libtiff
    - pyqt
    - paraview ==5.7.0  # [osx]
    - paraview ==5.8.1  # [linux]
    - fenics-dolfin

test:
  imports:
    - TexGen.Core
    - dolfin
    - paraview.simple
    - pumapy
  source_files:
    - python/tests/*.py

about:
  home: https://github.com/nasa/puma
  license: NASA Open Source
  license_file: 
    - LICENSE.txt
    - install/TexGen/texgen_gpl_license.txt
    - gui/src/Utilities/qcustomplot/GPL.txt
  summary: 'A package to compute material properties from micro-CT data.'
  description: |
    The Porous Microstructure Analysis (PuMA) software has been developed in order to 
    compute effective material properties and perform material response simulations on 
    digitized microstructures of porous media. PuMA is able to import digital three-dimensional 
    images obtained from X-ray microtomography or to generate artificial microstructures 
    that mimic real materials. PuMA also provides a module for interactive 3D visualizations. 
    Version 3 includes modules to compute simple morphological properties such as porosity, 
    volume fractions, pore diameter, and specific surface area. Additional capabilities include 
    the determination of effective thermal and electrical conductivity (including the ability 
    to simulate local anisotropy), effective diffusivity and tortuosity from the continuum to 
    the rarefied regime, and techniques to determine local material orientation.
  doc_url: https://puma-nasa.readthedocs.io/
  dev_url: https://github.com/nasa/puma

extra:
  recipe-maintainers:
    - fsemerar
