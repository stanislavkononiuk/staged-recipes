{% set name = "gfortran-dev" %}
{% set version = "7.3.0" %}

package:
  name: {{ name|lower }}_{{ target_platform }}
  version: {{ version }}

source:
  url: https://ftp.gnu.org/gnu/gcc/gcc-{{ version }}/gcc-{{ version }}.tar.gz
  sha256: fa06e455ca198ddc11ea4ddf2a394cf7cfb66aa7e0ab98cc1184189f1d405870

build:
  number: 1000
  skip: true  # [not osx]
  binary_has_prefix_files:
    - lib/libgcc_ext.10.*.dylib

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - make
  host:
    - libiconv {{ libiconv }}
    - zlib {{ zlib }}
    - gmp {{ gmp }}
    - mpfr {{ mpfr }}
    - isl {{ isl }}
    - mpc =1.1.0
  run:
    # this is not added by the run_exports for whatever reason
    - {{ pin_compatible('isl', max_pin='x.x') }}

test:
  files:
    - hello.c
    - hello.f90
    - maths.f90
  commands:
    - gfortran --help

about:
  home: http://gcc.gnu.org/
  license: GPL 3 (with GCC Runtime Library Exception 3.1)
  license_family: GPL
  summary: Fortran libraries from the GNU Compiler Collection

extra:
  recipe-maintainers:
    - beckermr
