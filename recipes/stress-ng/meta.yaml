{% set name = "stress-ng" %}
{% set version = "0.11.24" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://github.com/ColinIanKing/stress-ng/archive/V{{ version }}.tar.gz"
  sha256: cc1344b845f29dc3b5b6a76039cc33fa9913c7347af626a00b16a4cf9c2df955

build:
  number: 0
  skip: true  # [win and vc<14]

requirements:
  build:
    - make
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - glib
    - gcc_linux-64
  host:
    - libaio                    ###* libaio-dev
    - attr                      ###* libattr-dev
    #* libbsd-dev :: no candidates
    - libcap                    ###* libcap-dev
    - libgcrypt                 ###* libgcrypt-dev
    #* libipsec-mb-dev :: no candidates
    - judy                      ###* judy-devel
    - keyutils-libs-cos7-s390x  ###* keyutils-libs-devel
    #*  libsctp-dev :: no candidates
    - libatomic_ops             ###* libatomic1
    - zlib                      ###* zlib-devel
    - make  # [unix]
    - glib
    - gcc_linux-64

test:
  commands:
    - echo YES
    #- stress-ng ${SRC_DIR}/debian/tests/lite-test ## from: make lite-test
    #- stress-ng --vm 1 --vm-bytes 100M --vm-keep -t 10s

about:
  home: https://kernel.ubuntu.com/~cking/stress-ng/
  license: GPL-2.0-or-later
  license_family: GPL
  license_file: LICENSE
  summary: 'stress test a computer system in various selectable ways'
  description: |
    stress-ng will stress test a computer system in various selectable ways. It was designed to exercise various physical subsystems of a computer as well as the various operating system kernel interfaces.
  doc_url: https://wiki.ubuntu.com/Kernel/Reference/stress-ng
  dev_url: https://github.com/ColinIanKing/stress-ng

extra:
  recipe-maintainers:
    - mtekman
