diff --git a/CMakeLists.txt b/CMakeLists.txt
index 002be37d..bfc1fc38 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -477,15 +478,9 @@ endmacro()
 # Look for python
 # -----------------------------------------------------------------------------
 option(ENABLE_PYTHON_INTERFACE "Enable Python interface" ON)
-
-find_package (PythonInterp 3)
+find_package(PythonInterp 3)
 find_package(PythonLibs 3)
 
-if (NOT PYTHON_EXECUTABLE OR NOT PYTHON_LIBRARIES OR NOT PYTHON_INCLUDE_DIRS)
-    find_package (PythonInterp 2.7)
-    find_package(PythonLibs 2.7)
-endif()
-
 message(STATUS "PYTHON_EXECUTABLE=${PYTHON_EXECUTABLE}")
 message(STATUS "PYTHON_LIBRARIES=${PYTHON_LIBRARIES}")
 message(STATUS "PYTHON_INCLUDE_DIRS=${PYTHON_INCLUDE_DIRS}")
@@ -547,7 +542,30 @@ else()
 endif()
 
 if (ENABLE_PYTHON_INTERFACE)
+    # check python-config
     if (PYTHON_EXECUTABLE AND PYTHON_LIBRARIES AND PYTHON_INCLUDE_DIRS AND NOT COVERAGE)
+        SET(PY_CONFIG_EXE "${PYTHON_EXECUTABLE}.${PYTHON_VERSION_MINOR}-config")
+        message(STATUS "Will execute python config ${PY_CONFIG_EXE}")
+        execute_process(
+            COMMAND ${PY_CONFIG_EXE} --help
+            OUTPUT_VARIABLE PY_CONF_OPTIONS
+            RESULT_VARIABLE RES_VAR)
+
+        if(NOT ${RES_VAR} MATCHES "0")
+            message(WARNING "That python config did not work, trying another one...")
+            SET(PY_CONFIG_EXE "${PYTHON_EXECUTABLE}-config")
+            message(STATUS "Will execute python config ${PY_CONFIG_EXE}")
+            execute_process(
+                COMMAND ${PY_CONFIG_EXE} --help
+                OUTPUT_VARIABLE PY_CONF_OPTIONS
+                RESULT_VARIABLE RES_VAR)
+            if(NOT ${RES_VAR} MATCHES "0")
+                UNSET(PY_CONFIG_EXE)
+            endif()
+        endif()
+    endif()
+
+    if (PYTHON_EXECUTABLE AND PYTHON_LIBRARIES AND PYTHON_INCLUDE_DIRS AND PY_CONFIG_EXE AND NOT COVERAGE)
         message(STATUS "Found python interpreter, libs and header files")
         message(STATUS "Building python interface")
         add_subdirectory(python pycryptosat)
diff --git a/python/CMakeLists.txt b/python/CMakeLists.txt
index c393acc4..cdea949f 100644
--- a/python/CMakeLists.txt
+++ b/python/CMakeLists.txt
@@ -19,8 +19,19 @@
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 # THE SOFTWARE.
 
-execute_process(COMMAND python-config --cflags OUTPUT_VARIABLE PY_C_CONFIG)
-execute_process(COMMAND python-config --ldflags OUTPUT_VARIABLE PY_LD_CONFIG)
+execute_process(
+    COMMAND ${PY_CONFIG_EXE} --cflags
+    OUTPUT_VARIABLE PY_C_CONFIG)
+execute_process(
+    COMMAND ${PY_CONFIG_EXE} --ldflags
+    OUTPUT_VARIABLE PY_LD_CONFIG)
+
+string(REPLACE "\n" " " PY_C_CONFIG ${PY_C_CONFIG})
+string(REPLACE "\n" " " PY_LD_CONFIG ${PY_LD_CONFIG})
+
+message(STATUS "Python CFLAGS:  '${PY_C_CONFIG}'")
+message(STATUS "Python LDFLAGS: '${PY_LD_CONFIG}'")
+
 
 set(SETUP_PY    "${CMAKE_CURRENT_BINARY_DIR}/setup.py")
 set(OUTPUT      "${CMAKE_CURRENT_BINARY_DIR}/build")
diff --git a/python/setup.py.in b/python/setup.py.in
index 4913e993..619144b3 100644
--- a/python/setup.py.in
+++ b/python/setup.py.in
@@ -46,10 +46,10 @@ def cleanup(dat):
         if elem != "":
             ret.append(elem)
 
-    if is_apple != "":
-        for x in ret:
-            if x == "-lpython" or x == "-lframework":
-                x = "-undefined dynamic_lookup"
+#    if is_apple != "":
+#        for x in ret:
+#            if x == "-lpython" or x == "-lframework":
+#                x = "-undefined dynamic_lookup"
 
     return ret
     # return []
@@ -146,8 +146,6 @@ setup(
         "Intended Audience :: Developers",
         "Operating System :: OS Independent",
         "Programming Language :: C++",
-        "Programming Language :: Python :: 2",
-        "Programming Language :: Python :: 2.7",
         "Programming Language :: Python :: 3",
         "Programming Language :: Python :: 3.5",
         "License :: OSI Approved :: MIT License",
