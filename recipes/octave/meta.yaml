{% set version = "4.2.1" %}
{% set variant = "openblas" %}

package:
  name: octave
  version: {{ version }}

source:
  url: https://ftp.gnu.org/gnu/octave/octave-{{ version }}.tar.gz
  sha256: 80c28f6398576b50faca0e602defb9598d6f7308b0903724442c2a35a605333b

build:
  number: 0
  skip: True  # [win]
  features:
    - blas_{{ variant }}

requirements:
  build:
    - toolchain
    - gcc
    - openblas 0.2.19|0.2.19.*
    - blas 1.1 {{ variant }}
    - pcre
    - readline 6.2*
    - arpack
    - curl
    - fftw
    - fontconfig 2.12.*
    - freetype 2.7|2.7.*
    - glpk
    - gnuplot
    - hdf5 1.8.17|1.8.17.*
    - suitesparse
    - zlib 1.2.*
    - portaudio
    - libsndfile
    # Following gets linked at the end.
    - icu 58.*
    - ncurses 5.9*
    - xz 5.2.*
    - libxml2 2.9.*
    - libpng >=1.6.28,<1.7
    - glib 2.51.*
    - qt 4.8.*
    - openssl 1.0.*
    - libgcc
    - libuuid
  run:
    - openblas 0.2.19|0.2.19.*
    - blas 1.1 {{ variant }}
    - pcre
    - readline 6.2*
    - arpack
    - curl
    - fftw
    - fontconfig 2.12.*
    - freetype 2.7|2.7.*
    - glpk
    - gnuplot
    - hdf5 1.8.17|1.8.17.*
    - suitesparse
    - zlib 1.2.*
    - portaudio
    - libsndfile
    # Following gets linked at the end.
    - icu 58.*
    - ncurses 5.9*
    - xz 5.2.*
    - libxml2 2.9.*
    - libpng >=1.6.28,<1.7
    - glib 2.51.*
    - qt 4.8.*
    - openssl 1.0.*
    - libgcc
    - libuuid

test:
  commands:
    - octave --version
    - conda inspect linkages -p $PREFIX octave  # [not win]
    - conda inspect objects -p $PREFIX octave   # [osx]

about:
  home: https://www.gnu.org/software/octave/
  license: GPLv3
  license_file: COPYING
  doc_url: https://www.gnu.org/software/octave/doc/interpreter/
  summary: 'GNU Octave is a high-level language, primarily intended for numerical computations'

extra:
  recipe-maintainers:
    - isuruf

