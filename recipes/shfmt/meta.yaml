{% set name = "shfmt" %}
{% set version = "3.0.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/mvdan/sh/archive/v{{ version }}.tar.gz
  sha256: 4ce55f902c6c405f740357a1ccf095b605d14eb5b56d882c74bced4d6410d4ae

build:
  arch: linux
  number: 0
  # If the installation is complex, or different between Unix and Windows, use separate bld.bat and build.sh files instead of this key.
  # By default, the package will be built for the Python versions supported by conda-forge and for all major OSs.
  # Add the line "skip: True  # [py<35]" (for example) to limit to Python 3.5 and newer, or "skip: True  # [not win]" to limit to Windows.
  script: "CGO_ENABLED=0 go build -ldflags '-w -s -extldflags "-static"' ./cmd/shfmt"

requirements:
  build:
    - {{ compiler('c') }}
  host:
    - go
  run:
    - go

about:
  home: https://github.com/mvdan/sh
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: "A shell parser, formatter, and interpreter (sh/bash/mksh) - including shfmt"
  description: |
    simplejson is a simple, fast, complete, correct and extensible
    JSON <https://json.org> encoder and decoder for Python 2.5+ and
    Python 3.3+. It is pure Python code with no dependencies, but includes
    an optional C extension for a serious speed boost.
  dev_url: https://github.com/mvdan/sh

extra:
  recipe-maintainers:
    - roeey777
