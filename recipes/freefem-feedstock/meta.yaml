{% set name = "FreeFem" %}
{% set version = "4.10" %}
{% set sha256 = "957994c8f24cc2a671b8c116ae530796c3a431d4157ee71a3d6aab7122e7570d" %}
{% set build = 0 %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/{{ name }}/{{ name }}-sources/archive/refs/tags/v{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: {{ build }}
  skip: true  # [py2k or osx or win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - {{ compiler('fortran') }}
    - autoconf
    - automake
    - bison
    - cmake
    - flex
    - libgomp      # [linux]
    - llvm-openmp  # [osx]
    - m4
    - make
    - patch
    - perl
    - unzip
  host:
    - arpack
    - blis
    - fftw
    - gsl
    - hdf5
    - ipopt
    - libblas
    - liblapack
    - metis
    - mumps
    - nlopt
    - openmpi
    - scalapack
    - suitesparse
    - superlu
    - tetgen

test:
  commands:
    - test -f $PREFIX/bin/FreeFem++  # [unix]
    - test -f $PREFIX/bin/FreeFem++-nw  # [unix]
    - test -f $PREFIX/bin/ff-c++  # [unix]
    - test -f $PREFIX/lib/ff++/{{ version }}/include/ff++.hpp  # [unix]

about:
  home: https://freefem.org/
  license: LGPL-3.0-only
  license_family: LGPL
  license_file: LICENSE.txt
  summary: 'FreeFem : A high level multiphysics finite element software'
  description: >
    FreeFEM is a popular 2D and 3D partial differential equations (PDE) solver
    used by thousands of researchers across the world. It allows you to easily
    implement your own physics modules using the provided FreeFEM language.
    FreeFEM offers a large list of finite elements, like the Lagrange,
    Taylor-Hood, etc., usable in the continuous and discontinuous Galerkin
    method framework.
  doc_url: https://doc.freefem.org
  dev_url: https://github.com/FreeFem

extra:
  recipe-maintainers:
    - ldallolio
    - cnrdn
    - fbordeu
