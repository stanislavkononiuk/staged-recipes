{% set name = "sfml" %}
{% set version = "2.5.1" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/SFML/SFML/archive/{{ version }}.tar.gz
  sha256: 438c91a917cc8aa19e82c6f59f8714da353c488584a007d401efac8368e1c785

build:
  number: 0
  skip: True  # [win and vc<14]
  run_exports:
    - {{ pin_subpackage('sfml', max_pin='x.x') }}

requirements:
  build:
    - {{ compiler('cxx') }}
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}        # [linux]
    - {{ cdt('libxdamage') }}        # [linux]
    - {{ cdt('libxxf86vm') }}        # [linux]
    - libudev-devel-cos6-x86_64      # [linux]
    - xorg-libx11                    # [linux]
    - xorg-libxrandr                 # [linux]
    - libogg
    - freetype
    - libflac
    - libvorbis
    - openal-soft
    - cmake
    - make                           # [unix]
  host:
    - xorg-libxfixes                 # [linux]
    - xorg-libx11                    # [linux]
    - xorg-libxrandr                 # [linux]
    - libogg
    - freetype
    - libflac
    - libvorbis
    - openal-soft
  run:
    - xorg-libx11                    # [linux]
    - xorg-libxrandr                 # [linux]
    - libogg
    - freetype
    - libflac
    - libvorbis
    - openal-soft

test:
  commands:
    - test -f ${PREFIX}/lib/cmake/SFML/SFMLConfig.cmake                             # [unix]
    - test -d ${PREFIX}/include/SFML/Audio                                          # [unix]
    - test -d ${PREFIX}/include/SFML/Graphics                                       # [unix]
    - test -d ${PREFIX}/include/SFML/Network                                        # [unix]
    - test -d ${PREFIX}/include/SFML/System                                         # [unix]
    - test -d ${PREFIX}/include/SFML/Window                                         # [unix]
    - if exist %LIBRARY_LIB%\\cmake\\SFML\\SFMLConfig.cmake (exit 0) else (exit 1)  # [win]
    - if exist %LIBRARY_INC%\\SFML\\Audio (exit 0) else (exit 1)                    # [win]
    - if exist %LIBRARY_INC%\\SFML\\Graphics (exit 0) else (exit 1)                 # [win]
    - if exist %LIBRARY_INC%\\SFML\\Network (exit 0) else (exit 1)                  # [win]
    - if exist %LIBRARY_INC%\\SFML\\System (exit 0) else (exit 1)                   # [win]
    - if exist %LIBRARY_INC%\\SFML\\Window (exit 0) else (exit 1)                   # [win]

about:
  home: https://github.com/SFML/SFML
  license: zlib/libpng
  license_file: license.md
  summary: 'Simple and Fast Multimedia Library'
  description: |
    SFML is a simple, fast, cross-platform and object-oriented multimedia
    API. It  provides access to windowing, graphics, audio and network. It
    is written in C++,  and has bindings for various languages such as C,
    .Net, Ruby, Python.
  doc_url: https://www.sfml-dev.org
  dev_url: https://github.com/SFML/SFML

extra:
  recipe-maintainers:
    - martinRenou
