{% set name = "Kuyruk" %}
{% set version = "5.0.4" %}
{% set sha256 = "b98dd361d81a0308315fbbfb78ac6a7f79a132aeb08f76febb87f1e428d3dd4b" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  # TODO: Use PyPi releases starting with the next release:
  # https://github.com/cenkalti/kuyruk/pull/46
  #fn: {{ name }}-{{ version }}.tar.gz
  #url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  fn: 3d312fd191b141ef3fdb0f9ecae3d52ffa0ec160.zip
  url: https://github.com/cenkalti/kuyruk/archive/3d312fd191b141ef3fdb0f9ecae3d52ffa0ec160.zip
  sha256: {{ sha256 }}

build:
  number: 0
  script: python setup.py install --single-version-externally-managed --record record.txt
  entry_points:
    - kuyruk = kuyruk.__main__:main

requirements:
  build:
    - python
    - setuptools
    - amqp >=1.4.6
    - setproctitle >=1.1.8
    - blinker >=1.3
  run:
    - python
    # setuptools is required as a run dependency:
    # https://github.com/cenkalti/kuyruk/pull/45
    - setuptools
    - amqp >=1.4.6
    - setproctitle >=1.1.8
    - blinker >=1.3

test:
  imports:
    - kuyruk
  commands:
    - kuyruk --help

about:
  home: https://github.com/cenkalti/kuyruk
  license: MIT
  license_file: LICENSE
  summary: 'Simple task queue for Python'
  description: |
    Kuyruk is a simple and easy way of distributing tasks to run on servers.
    It uses RabbitMQ as message broker and depends on amqp which is a
    pure-Python RabbitMQ client library. Compatible with Python 2.7+ and 3.4+.
    All design decisions is based on simplicity. Speed is not first priority.
    Kuyruk only supports RabbitMQ and does not plan to support any other
    backend. Kuyruk is designed for long running mission critical jobs. For
    this reason Kuyruk sends acknowledgement only after the task is fully
    processed.
  doc_url: http://kuyruk.readthedocs.io/
  dev_url: https://github.com/cenkalti/kuyruk

extra:
  recipe-maintainers:
    - frol
    - cenkalti
