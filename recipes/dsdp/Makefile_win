## Build DSDP library with Microsoft Visual Studio

CFLAGS = /Iinclude /Isrc\solver /Isrc\sdp \
	/D_CRT_SECURE_NO_WARNINGS=1 \
	/DDSDP_MS_TIME \
	/nologo \
	/W3 \
	/O2 \
        /Zi

LDFLAGS = /LIBPATH:%LIBRARY_LIB% openblas.lib

OBJSET = src\bounds\allbounds.obj \
        src\bounds\dbounds.obj \
        src\lp\dsdplp.obj \
        src\vecmat\identity.obj \
        src\vecmat\vechu.obj \
        src\vecmat\zeromat.obj \
        src\vecmat\rmmat.obj \
        src\vecmat\onemat.obj \
        src\vecmat\cholmat2.obj \
        src\vecmat\dtrsm2.obj \
        src\vecmat\diag.obj \
        src\vecmat\sdpxlist.obj \
        src\vecmat\drowcol.obj \
        src\vecmat\dufull.obj \
        src\vecmat\sdpexit.obj \
        src\vecmat\sdpvec.obj \
        src\vecmat\cholmat.obj \
        src\vecmat\spds.obj \
        src\vecmat\sdpalloc.obj \
        src\vecmat\sdpnfac.obj \
        src\vecmat\sdpmatx.obj \
        src\vecmat\vech.obj \
        src\vecmat\dlpack.obj \
        src\vecmat\sdpsymb.obj \
        src\vecmat\sdporder.obj \
        src\vecmat\sdpdvct.obj \
        src\solver\dsdpx.obj \
        src\solver\dsdpconverge.obj \
        src\solver\dualimpl.obj \
        src\solver\dsdpcg.obj \
        src\solver\dsdpcops.obj \
        src\solver\dsdpsetoptions.obj \
        src\solver\dsdpobjcone.obj \
        src\solver\dsdpsetup.obj \
        src\solver\dsdpschurmatadd.obj \
        src\solver\dsdpprintout.obj \
        src\solver\dsdpsetdata.obj \
        src\solver\dsdprescone.obj \
        src\solver\dsdpschurmat.obj \
        src\solver\dualalg.obj \
        src\solver\dsdpcone.obj \
        src\sys\dsdplog.obj \
        src\sys\dsdperror.obj \
        src\sys\dsdploginfo.obj \
        src\sys\dsdptime.obj \
        src\sdp\dsdpdsmat.obj \
        src\sdp\sdpconevec.obj \
        src\sdp\dsdpdatamat.obj \
        src\sdp\sdpkcone.obj \
        src\sdp\dsdpadddatamat.obj \
        src\sdp\dsdpadddata.obj \
        src\sdp\dsdpxmat.obj \
        src\sdp\sdpsss.obj \
        src\sdp\printsdpa.obj \
        src\sdp\sdpcompute.obj \
        src\sdp\sdpconesetup.obj \
        src\sdp\dsdpstep.obj \
        src\sdp\sdpcone.obj \
        src\sdp\dsdpdualmat.obj \
        src\sdp\dsdpblock.obj

all: dsdp.dll

.c.obj:
        cl $(CFLAGS) /Fo$*.obj /c $*.c

## DSDP shared library
dsdp.dll: $(OBJSET)
        link /DLL /out:dsdp.dll /def:dsdp.def $(OBJSET) $(LDFLAGS)

## DSDP5 executable
#dsdp5.exe: examples\readsdpa.obj dsdp.dll
#        link /out:dsdp5.exe examples\readsdpa.obj dsdp.lib $(LDFLAGS)

## Static library
#dsdp.lib: $(OBJSET)
#        lib /out:dsdp.lib $(OBJSET)

## eof ##
