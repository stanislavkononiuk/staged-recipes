{% set name = "icon" %}
{% set version = "9.5.2" %}
{% set build = "0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://zenodo.org/record/5213700/files/eschen42/portableIcon-v{{ version }}_cf_{{ build }}_rev2.zip  # [win]
  sha256: 325f34453e62c49e4ceeb1580ee303cc72845230dda0f558d630bfe2bf1ac5e2  # [win]
  url: https://github.com/gtownsend/icon/archive/refs/heads/master.zip  # [linux64]
  sha256: 6c118b2dcc26b6ea3c4129cc82d110a275d3c806749211773fe34c106949efb0  # [linux64]

build:
  number: {{ build }}
  skip: True  # [osx]

# attempting to address mysterious Centos and Linux build failures
requirements:  # [linux64]
  build:  # [linux64]
    - make  # [linux64]
    - {{ compiler('c') }}  # [linux64]
    - sysroot_linux-64  # [linux64]

test:
  commands:
    - icont -V
    - iconx -V
    - echo 'procedure main(); every write(&features); end' | icon -  # [linux64]

about:
  summary: Icon translator, runtime, and library.
  doc_url: https://cs.arizona.edu/icon
  home: https://github.com/eschen42/portableIcon  # [win]
  license: LGPL-3.0-or-later  # [win]
  license_family: LGPL  # [win]
  license_file:  LICENSE.md  # [win]
  dev_url: https://github.com/eschen42/portableIcon  # [win]
  description:  # [win]
    - This module installs the translator and runtime for
      the Icon Programming Language, built without graphics support,
      along with the applicable files from the Icon Programming Library.
    - This packge is MIT licensed, as are the scripts to support running Icon
      programs and scripts on Microsoft Windows.
    - Note that https://github.com/gtownsend/icon/blob/master/README states
      that the Icon Programming Language itself is in the public domain.
    - The Windows build includes support to make the tools and translated
      programs work in a manner similar to how they run on Unix and depends
      on the included cygwin1.dll file that is LGPL licensed.
  home: https://cs.arizona.edu/icon  # [linux64]
  license: MIT  # [linux64]
  license_family: MIT  # [linux64]
  license_file: LICENSE.txt  # [linux64]
  dev_url: https://github.com/gtownsend/icon  # [linux64]
  description:  # [linux64]
    - This module installs the translator and runtime for
      the Icon Programming Language, built without graphics support,
      along with the applicable files from the Icon Programming Library.
    - This packge is MIT licensed, as are the scripts to support running Icon
      programs and scripts on Microsoft Windows.
    - Note that https://github.com/gtownsend/icon/blob/master/README states
      that the Icon Programming Language itself is in the public domain.

extra:
  recipe-maintainers:
    - eschen42
