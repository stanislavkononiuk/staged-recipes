{% set name = "icon" %}
{% set version = "9.5.2" %}
{% set build = "0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/gtownsend/icon/archive/refs/heads/master.zip
  sha256: 6c118b2dcc26b6ea3c4129cc82d110a275d3c806749211773fe34c106949efb0

build:
  number: 0
  skip: True  # [win or osx or linux32]

# commenting out sysroot because of unsatisfiable dependencies to address mysterious Centos and Linux build failures
# gcc dependency should cover the sysroot needs because
#   https://docs.conda.io/projects/conda-build/en/latest/resources/define-metadata.html?highlight=gcc#export-runtime-requirements
requirements:
  build:
    - make
    - sed
    - {{ compiler('c') }}

test:
  commands:
    - icont -V
    - iconx -V
    - echo 'procedure main(); every write(&features); end' | icon -

about:
  summary: Icon translator, runtime, and library.
  doc_url: https://cs.arizona.edu/icon
  home: https://cs.arizona.edu/icon
  license: MIT
  license_family: MIT
  license_file: LICENSE.txt
  dev_url: https://github.com/gtownsend/icon
  description:
    - This module installs the translator and runtime for
      the Icon Programming Language, built without graphics support,
      along with the applicable files from the Icon Programming Library.
    - Note that https://github.com/gtownsend/icon/blob/master/README states
      that the Icon Programming Language itself is in the public domain.

extra:
  recipe-maintainers:
    - eschen42
