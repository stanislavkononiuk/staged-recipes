# remember ```
#          conda config --set anaconda_upload no
#          conda-build --numpy 1.16 .`
#          dir /w C:\Users\art\miniforge3\envs\builder3\conda-bld\win-64
#          ```
{% set name = "icon" %}
{% set version = "9.5.2" %}
{% set build = "0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://zenodo.org/record/5201699/files/eschen42/portableIcon-v{{ version }}_cf_{{ build }}.zip  # [win]
  sha256: b493750390d3d15c08cff39bba95b1e74a577b9a6cddf2ba5ed6981bafa8ca76  # [win]
  url: https://github.com/gtownsend/icon/archive/refs/heads/master.zip  # [linux64]
  sha256: 6c118b2dcc26b6ea3c4129cc82d110a275d3c806749211773fe34c106949efb0  # [linux64]

build:
  number: {{ build }}
  skip: True  # [osx]

test:
  commands:
    - icont -V
    - iconx -V
    - echo 'procedure main(); every write(&features); end' | icon -  # [linux64]

# outputs:  # [linux64]
#   - name: iconbin
#     files:
#       - usr/local/icon
#       - bin

about:
  home: https://github.com/eschen42/portableIcon  # [win]
  home: https://cs.arizona.edu/icon  # [linux64]
  license: MIT
  license_family: MIT
  license_file: LICENSE.txt
  summmary: Icon translator, linker, and scripts without graphics
  description: |
    This module installs the linker and translator for the Icon Programming
    Language, built without graphics support, along with the applicable
    files from the Icon Programming Library.  The Windows build includes
    support to make the tools and translated programs work in a manner
    similar to how they run on Unix.
    Note that https://github.com/gtownsend/icon/blob/master/README states
    tht the Icon Programming Language itself is in the public domain.
  dev_url: https://github.com/eschen42/portableIcon  # [win]
  dev_url: https://github.com/gtownsend/icon  # [linux64]
  doc_url: https://cs.arizona.edu/icon

extra:
  recipe-maintainers:
    - eschen42
