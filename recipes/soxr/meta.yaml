{% set name = "soxr" %}
{% set version = "0.1.3" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  url: https://downloads.sourceforge.net/project/{{ name }}/{{ name }}-{{ version }}-Source.tar.xz
  sha256: b111c15fdc8c029989330ff559184198c161100a59312f5dc19ddeb9b5a15889

build:
  number: 0

requirements:
  build:
    - cmake
    - {{ compiler('cxx') }}
    - {{ compiler('c') }}
    - ninja
    - llvm-openmp  # [osx]
    - libgomp      # [linux]
  host:
    - tinyxml

test:
  commands:
    - test -f install/share/doc/libsoxr/README  # [not win]
    - test -f install/share/doc/libsoxr/LICENCE  # [not win]
    - test -f install/share/doc/libsoxr/NEWS  # [not win]
    - test -f install/lib/libsoxr.so.0.1.2  # [linux]
    - test -f install/lib/libsoxr.so.0  # [linux]
    - test -f install/lib/libsoxr.so  # [linux]
    - test -f install/include/soxr.h  # [not win]
    - test -f install/lib/libsoxr-lsr.so.0.1.9  # [linux]
    - test -f install/lib/libsoxr-lsr.so.0  # [linux]
    - test -f install/lib/libsoxr-lsr.so  # [linux]
    - test -f install/include/soxr-lsr.h  # [not win]
    - test -f install/share/doc/libsoxr/examples/1-single-block.c  # [not win]
    - test -f install/share/doc/libsoxr/examples/1a-lsr.c  # [not win]
    - test -f install/share/doc/libsoxr/examples/2-stream.C  # [not win]
    - test -f install/share/doc/libsoxr/examples/3-options-input-fn.c  # [not win]
    - test -f install/share/doc/libsoxr/examples/4-split-channels.c  # [not win]
    - test -f install/share/doc/libsoxr/examples/5-variable-rate.c  # [not win]
    - test -f install/share/doc/libsoxr/examples/examples-common.h  # [not win]
    - test -f install/share/doc/libsoxr/examples/README  # [not win]

about:
  home: https://sourceforge.net/projects/soxr/
  license: LGPL-2.1-or-later
  license_file: install/share/doc/libsoxr/LICENCE
  summary: 'The SoX Resampler library'
  description: |
    High quality, one-dimensional sample-rate conversion library

  doc_url: https://sourceforge.net/p/soxr/wiki/Home/
  dev_url: https://sourceforge.net/projects/soxr/

extra:
  recipe-maintainers:
    - HosameldinMohamed
