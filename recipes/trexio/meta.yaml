
{% set name = "trexio" %}
{% set version = "2.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/TREX-CoE/trexio/releases/download/v{{ version }}/{{ name }}-{{ version }}.tar.gz
  sha256: 232866c943b98fa8a42d34b55e940f7501634eb5bd426555ba970f5c09775e83

build:
  number: 0
  skip: true  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('fortran') }}
    - autoconf  
    - automake  
    - libtool   
    - make      
    - gnuconfig 
    - pkg-config

  host:
    - hdf5
    # the dependencies below are not required by TREXIO but they get exported from HDF5
    # and if they are not listed here than the `conda-build --error-overlinking` fails
    - zlib    
    - openssl 
    - libcurl 

  run:
    - hdf5   
          #   - zlib    
          #   - openssl 
          #   - libcurl 

test:
  commands:
    - test -f $PREFIX/lib/libtrexio.a  # [unix]

#outputs:
# - name: trexio
#   build:
#     skip: true  # [win]
#   script: install.sh  # [not win]
#
#   requirements:
#     build:
#       - {{ compiler('c') }}
#       - {{ compiler('fortran') }}
#       - libtool
#       - make
#     host:
#       - hdf5
#     run:
#       - hdf5
#
#   test:
#     commands:
#       - test -f $PREFIX/include/trexio.h  # [unix]

about:
  home: https://github.com/TREX-CoE/trexio
  license: BSD-3-Clause
  license_family: BSD 
  license_file: COPYING
  summary: 'TREX library for efficient I/O'
  description: |
    The TREXIO library defines a standard format for storing wave functions, 
    together with an C-compatible API such that it can be easily used in 
    any programming language.
  doc_url: https://trex-coe.github.io/trexio/
  dev_url: https://github.com/TREX-CoE/trexio

extra:
  recipe-maintainers:
    # GitHub IDs for maintainers of the recipe (there will be spam!).
    - q-posev
