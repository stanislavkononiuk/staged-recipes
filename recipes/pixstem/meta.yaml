{% set name = "pixstem" %}
{% set version = "0.3.3" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 400da42fb11115b62548e8227f26b97c573870a72ebb5dbe66af437bec47c4a0

build:
  noarch: python
  number: 0
  script: "{{ PYTHON }} -m pip install . --no-deps -vv"

requirements:
  host:
    - python =>3
    - pip
  run:
    - python =>3
    - scipy
    - numpy >=1.13
    - h5py
    - matplotlib >=2.0
    - dask
    - tqdm
    - scikit-image >=0.13
    - scikit-learn
    - hyperspy >=1.4

test:
  imports:
    - pixstem
  commands:
    - export MPLBACKEND=agg  # [unix]
    - set MPLBACKEND=agg  # [win]
    - python -c "import pixstem.api"

about:
  home: https://pixstem.org
  license: GPL-3.0
  license_family: GPL
  license_file: LICENSE
  summary: 'Library for processing scanning transmission electron microscopy data acquired using a pixelated detector'
  description: |
    Python library for analysing pixelated scanning transmission electron microscopy (STEM) datasets.
    Pixelated STEM is using a 2D detector to image the convergent beam electron pattern generated by the electron beam after passing through a material.
    The library has implemented several common functions used with these types of datasets, like radial integration and center of mass.
    These are implemented as HyperSpy-type signals, where these new signals inherit various HyperSpy signal.
  doc_url: https://pixstem.org/start_pixstem
  dev_url: https://gitlab.com/pixstem/pixstem

extra:
  recipe-maintainers:
    - magnunor
