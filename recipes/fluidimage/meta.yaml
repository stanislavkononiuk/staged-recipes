{% set name = "fluidimage" %}
{% set version = "0.1.1" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: 749d682ea0a14c9d9e7d58c8b0d4a0274a89c3fa2a0a81557563473b85236d4d

build:
  number: 0
  entry_points:
    - fluidimviewer-pg = fluidimage.gui.pg_main:main
  script: "{{ PYTHON }} -m pip install . --no-deps --ignore-installed -vv "

requirements:
  host:
    - fluiddyn >=0.2.0
    - h5netcdf
    - h5py
    - imageio
    - matplotlib >=1.4.2
    - numpy >=1.8
    - pims
    - pip
    - pyfftw >=0.10.4
    - python >=3.6
    - scipy >=0.14.1
    - trio
    - setuptools_scm
  run:
    - dask
    - fluiddyn >=0.2.0
    - h5netcdf
    - h5py
    - imageio
    - matplotlib >=1.4.2
    - numpy >=1.8
    - pims
    - pyfftw >=0.10.4
    - python >=3.6
    - scipy >=0.14.1
    - trio
    - ipython
    - setuptools_scm
    - opencv

test:
  imports:
    - fluidimage
    - fluidimage.calcul
    - fluidimage.calcul.interpolate
    - fluidimage.calibration
    - fluidimage.data_objects
    - fluidimage.executors
    - fluidimage.gui
    - fluidimage.gui.launcher
    - fluidimage.old_topo
    - fluidimage.old_topo.waiting_queues
    - fluidimage.postproc
    - fluidimage.preproc
    - fluidimage.reconstruct
#    - fluidimage.reconstruct.tomo
    - fluidimage.topologies
    - fluidimage.util
    - fluidimage.works
    - fluidimage.works.piv
  commands:
    - fluidimviewer-pg --help

about:
  home: https://bitbucket.org/fluiddyn/fluidimage
  license: CeCILL-B
  license_file: LICENSE.txt
  summary: libre Python framework for scientific processing of large series
    of images.
  description: |
    This package is young but already good enough to be used “in production”
    to display and pre-process images, compute displacement or velocity fields
    with Particle Image Velocimetry (PIV, i.e. displacements of pattern
    obtained by correlations of cropped images) and optical flow, analyze and
    display PIV fields.

  doc_url: https://fluidimage.readthedocs.io

extra:
  recipe-maintainers:
    - CyrilleBonamy
    - paugier
