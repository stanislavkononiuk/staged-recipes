{% set name = "nspyre" %}
{% set version = "0.3.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  # url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  # sha256: d58439c548433adcda98e695be53e526ba940a4b9c44fb9a05d92cd495cdd47f
  url: https://github.com/NSpyre-Dev/nspyre/archive/v0.3.0.rc1.tar.gz

build:
  noarch: python
  number: 0
  entry_points:
    - nspyre = nspyre.gui:main
  script: {{ PYTHON }} -m pip install . -vv
  skip: True  # [py<38]

requirements:
  host:
    - python >=3.8
    - pip
  run:
    - python >=3.8
    - pip
    - git
    - hub

    - defaults::mongodb =4.2.*  # still don't have a version from conda-forge that works with windows
    - pymongo >=3.10.1

    - numpy >=1.19.1  # do we want mlk versions??
    - scipy >=1.5.2
    - pandas >=1.1.1

    - pyqt >=5.12.3
    - pyqtgraph >=0.11.0

    - pyvisa>=1.10.1

    - pint >=0.15
    - lantz >=0.5.3 # may update the label for a minor update

    - parse >=1.17.0
    - tqdm >=4.48.2
    - waiting       # not on conda-forge
    - rpyc >=4.1.5

test:
  imports:
    - nspyre
    - nspyre.config
    - nspyre.gui
    - nspyre.gui.widgets
    - nspyre.inserv
    - nspyre.spyrelet
    - nspyre.utils
  commands:
    - pip check
    - nspyre --help
  requires:
    - pip

about:
  home: https://github.com/NSpyre-Dev/nspyre
  license: BSD-3-Clause
  license_family: BSD
  license_file: LICENSE
  summary: 'Pythonic Networked Scientific Experimentation Toolkit'

  # The remaining entries in this section are optional, but recommended.
  description: |
    NSpyre is a Python Framework for conducting physics experiments.
    It uses a networked approach to allow for the running of experiments 
    using distributed equipment over many networked systems. The 
    experimental hardware being controlled can thus be connected to 
    different computers, which can in turn be controlled by another 
    machine running the experimental commands. This allows for the easy 
    integration of shared resources in a research environment.
  doc_url: https://nspyre.readthedocs.io/
  dev_url: https://github.com/NSpyre-Dev/nspyre

extra:
  recipe-maintainers:
    - mtsolmn
    - jacobfeder
