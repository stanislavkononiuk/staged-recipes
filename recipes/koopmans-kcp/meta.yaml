{% set name = "koopmans-kcp" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/epfl-theos/koopmans/archive/v{{ version }}.tar.gz
  sha256: 176fecdf8a7dc5a13936ff8c71b3930338a3a1e51d4350bcfdb82449370bf867

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('fortran') }}
    - make
    - wget
  host:
    - fftw
    - libblas
    - liblapack
    - openmpi
    - scalapack
  run:
    - fftw
    - openmpi
    - scalapack

test:
  commands:
    - test -f ${PREFIX}/bin/kcp.x

about:
  home: https://github.com/epfl-theos/koopmans-kcp
  summary: 'Implementation of Koopmans functionals with full orbital optimization in Quantum ESPRESSO v4.1'
  description: |
    koopmans-kcp is an implementation of Koopmans functionals in Quantum
    ESPRESSO v4.1 with full orbital optimization. Instead of using this
    as a stand-alone code, it is strongly recommended you install and use
    the larger koopmans package <https://koopmans-functionals.org>.
  license: GPL-2.0-only
  license_family: GPL
  license_file: LICENSE
  doc_url: https://koopmans-functionals.org
  dev_url: https://github.com/epfl-theos/koopmans-kcp

extra:
  recipe-maintainers:
    - elinscott
