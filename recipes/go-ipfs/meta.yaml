{% set version = "0.7.0" %}

package:
  name: go-ipfs
  version: {{ version }}

source:
  url: https://github.com/ipfs/go-ipfs/releases/download/v{{ version }}/go-ipfs-source.tar.gz
  sha256: c349802561a61c1efeade4e3e681723b76e9192edacc5a955cf5f68e49e57fba
  folder: src/github.com/ipfs/go-ipfs

build:
  number: 0
  skip: true  # [osx]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('go-cgo') }}
    - posix  # [win]
    - go-licenses
    - make  # [unix]
  host:
    - openssl

test:
  commands:
    - ipfs --version
    - export IPFS_PATH=$(pwd)/.ipfs-repo
    - ipfs init
    - ipfs cat /ipfs/QmQPeNsJPyVWPFDVHb77w8G42Fvo15z4bG2X8D2GhfbSXc/readme | grep Hello

about:
  home: https://ipfs.io
  license: Apache-2.0 or MIT
  license_file:
    - src/github.com/ipfs/go-ipfs/LICENSE-APACHE
    - src/github.com/ipfs/go-ipfs/LICENSE-MIT
    # TODO: on linux, about 10 upstreams fail (many are ipfs/ipld first-party)
    # - third-party-licenses.txt

  summary: 'IPFS implementation in Go'

  # The remaining entries in this section are optional, but recommended.
  description: |
    IPFS is a global, versioned, peer-to-peer filesystem. It combines good ideas
    from previous systems such as Git, BitTorrent, Kademlia, SFS, and the Web.
    It is like a single BitTorrent swarm, exchanging git objects. IPFS provides
    an interface as simple as the HTTP web, but with permanence built-in. You
    can also mount the world at /ipfs.
  doc_url: https://docs.ipfs.io
  dev_url: https://github.com/ipfs/go-ipfs

extra:
  recipe-maintainers:
    - bollwyvl
