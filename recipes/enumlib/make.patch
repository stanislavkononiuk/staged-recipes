From 5a9090ebe783a62f11ef57ed10ed174f8a111bdc Mon Sep 17 00:00:00 2001
From: Jan Janssen <jan-janssen@users.noreply.github.com>
Date: Tue, 13 Jul 2021 15:42:28 +0200
Subject: [PATCH] Update Makefile

---
 src/Makefile | 60 ++--------------------------------------------------
 1 file changed, 2 insertions(+), 58 deletions(-)

diff --git a/src/Makefile b/src/Makefile
index 8d4741ee..a69ead69 100644
--- a/src/Makefile
+++ b/src/Makefile
@@ -4,65 +4,10 @@
 #
 
 # Shell
-SHELL		= /bin/bash
+SHELL		= ${PREFIX}/bin/bash
 
 # enumlib library paths
-LBD1 = ../symlib/src
-
-FOUND = false
-ifeq (${F90},gfortran)  # gfortran compiler
-  ifeq (${DEBUG},false)
-     FFLAGS = -O3 -ffree-line-length-none -fno-underscoring -I${LBD1}
-     FOUND = true
-  else
-     FFLAGS = -fPIC -g -fbounds-check -Wall -ffree-line-length-none -fno-underscoring -I${LBD1}
-     FOUND = true
-  endif
-endif
-
-ifeq (${F90},ifc)  # Intel compiler
-  FFLAGS = -fPIC -g -error-limit 7 -traceback -check bounds -warn  -I${LBD1}
-  FOUND = true
-endif
-
-ifeq (${F90},ifort)  # Intel compiler
-  ifeq (${DEBUG},false)
-     FFLAGS =  -fPIC -O3 -I${LBD1}
-     FOUND = true
-  else
-#  F90 =  /opt/intel/fc/10.0.016/bin/ifort
-     FFLAGS =  -fPIC -g -debug -error-limit 7 -heap-arrays -traceback -check bounds -warn -I${LBD1}
-     FOUND = true
-#-prof-use -prof-dir .
-   endif
-endif
-
-
-ifeq (${F90},xlf90) # IBM compiler
-  FFLAGS = -g -C -fPIC -qsuffix=f=f90  -I${LBD1}
-  FOUND = true
-endif
-ifeq (${F90},f95) # Absoft PPC compiler
-#  FFLAGS =  -profile -p ${LBDR}
-  FFLAGS = -g -Rb -Rc  -fPIC -nodefaultmod -p ${LBD1} #-ea
-# B80  show entry in subprograms ; Rb bounds; Rc array conformance;
-# z2 warning level
-# -O3 optimization
-# -ea stop after one error
-  FOUND = true
-endif
-ifeq (${F90},)  # If the variable isn't set, make sure compilation bombs
-error:
-	echo Error environmental variable "F90" not set!
-endif
-ifneq (${FOUND},true) # If it's set but no matching flags then bomb
-error:
-	echo Error: makefile doesn\'t have flags for this compiler
-endif
-
-# if type "python" > /dev/null; then
-#     python irevision.py derivative_structure_generator.f90 version.enum
-# fi
+LBD1 = ${PREFIX}/lib
 
 SRC = sorting.f90 enumeration_types.f90 io_utils.f90 arrow_related.f90 tree_class.f90 \
       labeling_related.f90 enumeration_routines.f90\
@@ -80,7 +25,6 @@ VPATH:= ../aux_src: ../src
 lib: pre_comp libenum.a
 
 pre_comp:
-	+$(MAKE) -C ../symlib/src
 	sed -i.bak "s/\(write(23,'(A)')\)\(.*\)/\1 \"`git describe --tags --dirty --abbrev=4`\"/" derivative_structure_generator.f90
 
 libenum.a: ${OBJS}
