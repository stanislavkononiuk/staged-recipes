{% set name = "sparse_dot_topn" %}
{% set version = "0.2.5" %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  url: "https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz"
  sha256: "2028d451d81cf5a73cf9d5fc56de35f80ac8dbd528a6abe3b723bec9c1adcc38"

build:
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"

requirements:
  build:
    - {{ compiler('cxx') }}
  host:
    - pip
    - python
    - numpy
    - cython
  run:
    - python
    - {{ pin_compatible('numpy') }}
    - scipy

test:
  imports:
    - sparse_dot_topn

about:
  home: "https://github.com/ing-bank/sparse_dot_topn"
  license: "Apache-2.0"
  license_family: "Apache"
  license_file: "LICENSE"
  summary: |
    Sparse_dot_topn provides a fast way to performing a sparse matrix multiplication
    followed by top-n multiplication result selections. Comparing very large feature
    vectors and picking the best matches, in practice often results in performing a
    sparse matrix multiplication followed by selecting the top-n multiplication results.
    In this package, we implement a customized Cython function for this purpose.
    When comparing our Cythonic approach to doing the same use with SciPy and NumPy
    functions, our approach improves the speed by about 40% and reduces memory consumption.
  doc_url: "https://pypi.org/project/sparse-dot-topn/"
  dev_url: "https://github.com/ing-bank/sparse_dot_topn"

extra:
  recipe-maintainers:
    - oblute
    - benhuff
    - rluria14
