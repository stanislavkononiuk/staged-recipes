{% set name = "quarticRootsFlocke" %}
{% set version = "1.0.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/ebertolazzi/{{ name }}/archive/refs/tags/{{ version }}.tar.gz
  sha256: 72520022b5dc31b9670b2bae228428f8dbc49ee2e71224a34ea47958fc010e47

build:
  number: 0

requirements:
  build:
    - {{ compiler('cxx') }}
    - cmake
    - ninja

# TODO: Make a simple program that includes/links the library (and checks for a
# small result).
test:
  requires:
    - {{ compiler('cxx') }}
  commands:
    - test -f "${PREFIX}/lib/libQuartic_linux_static.a"
    - test -f "${PREFIX}/include/Quartic/PolynomialRoots.hh"
    - ${CXX} ${CXXFLAGS} -L"${PREFIX}/lib" -I "${PREFIX}/include/Quartic" "${RECIPE_DIR}/test_linkage.cpp" -o test_linkage -Wall -Wextra -Werror -lQuartic_linux_static
    - ./test_linkage

about:
  home: https://github.com/ebertolazzi/{{ name }}
  license: BSD-2-Clause
  license_family: BSD
  license_file: License.txt
  summary: 'C++ rewrite of rpoly.f'
  description: |
    Port to C++ of the algorithm of Norbert Flocke for polynomial roots up to
    degree 4. Also Jenkins-Traub real polynomial root finder is ported but is
    experimental for the moment.
  doc_url: http://ebertolazzi.github.io/{{ name }}
  dev_url: https://github.com/ebertolazzi/{{ name }}

extra:
  recipe-maintainers:
    - jptiz
