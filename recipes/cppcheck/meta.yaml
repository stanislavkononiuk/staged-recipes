{% set name = "cppcheck" %}
{% set version = "1.80" %}
{% set sha256 = "20863db018d69c33648bdedcdc9d81d818b9064cc4333f0d4dc45e114bd0f000" %}  # [not win]
{% set sha256 = "19b326b605128508b14b95e8901f87b857a6fbc3f29ccc3e3d8087fe46c47eb7" %}  # [win32]
{% set sha256 = "f798ea7923861b3f8d1e25e435e299b2cc7ab56563c02bd52596a3666a865542" %}  # [win64]

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ version }}.tar.gz                                                   # [not win]
  url: https://github.com/danmar/cppcheck/archive/{{ version }}.tar.gz       # [not win]
  sha256: {{ sha256 }}                                                       # [not win]
  fn: {{ name }}-{{ version }}-x86-Setup.msi                                                                      # [win32]
  url: https://github.com/danmar/cppcheck/releases/download/{{ version }}/{{ name }}-{{ version }}-x86-Setup.msi  # [win32]
  sha256: {{ sha256 }}                                                                                            # [win32]
  fn: {{ name }}-{{ version }}-x64-Setup.msi                                                                      # [win64]
  url: https://github.com/danmar/cppcheck/releases/download/{{ version }}/{{ name }}-{{ version }}-x64-Setup.msi  # [win64]
  sha256: {{ sha256 }}                                                                                            # [win64]

build:
  number: 0

requirements:  # [not win]
  build:       # [not win]
  - cmake      # [not win]
  - toolchain  # [not win]

test:
  commands:
    - cppcheck --version

about:
  description:
    Cppcheck is a static analysis tool for C/C++ code. Unlike C/C++ compilers
    and many other analysis tools it does not detect syntax errors in the code.
    Cppcheck primarily detects the types of bugs that the compilers normally do
    not detect. The goal is to detect only real errors in the code (i.e. have
    zero false positives).
  home: 'http://cppcheck.sourceforge.net/'
  dev_url: 'https://github.com/danmar/cppcheck'
  license: 'GPLv3'
  license_family: 'GPL'
  # The COPYING file just isn't included in the msi installer.
  license_file: COPYING  # [not win]
  summary: 'A static analysis tool for C/C++ code.'

extra:
  recipe-maintainers:
    - tovrstra
