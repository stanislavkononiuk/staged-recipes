{% set name = "CaImAn" %}
{% set version = "1.5.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/flatironinstitute/{{ name }}/archive/v{{ version }}.tar.gz
  sha256: ab272a4cd8ed4200fd844c7a9fa5770257313a8f6eb658ce57a82577f0ca3e75

build:
  number: 0
  skip: True  # [not py==36]
  script: "{{ PYTHON }} -m pip install . -vv"
#  entry_points:
#    - thecommand = package.module:function

requirements:
  host:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - python
    - pip
    - numpy
    - cython
    - ripgrep
  run:
    - python=3.6
    - tensorflow
    - bokeh
    - cython
    - future
    - h5py
    - ipykernel=4.10
    - ipython
    - ipyparallel
    - jupyter
    - matplotlib
    - mypy
    - nose
    - numpy
    - opencv
    - peakutils
    - pims
    - scipy
    - scikit-image
    - scikit-learn
    - spyder
    - tifffile
    - tk=8.6.8
    - tqdm
    - pyqtgraph
    - pynwb

test:
  # Some packages might need a `test/commands` key to check CLI.
  # List all the packages/modules that `run_test.py` imports.
  imports:
    - caiman
#  commands:
#    - thecommand

about:
  home: http://github.com/flatironinstitute/caiman
  license: GPL-2.0
  license_family: GPL
  license_file: LICENSE.txt
  summary: 'Calcium imaging analysis - 1p, 2p microscopy'

  # The remaining entries in this section are optional, but recommended.
  description: |
    CaImAn implements a set of essential methods required in the analysis
    pipeline of large scale calcium imaging data. Fast and scalable algorithms
    are implemented for motion correction, source extraction, spike
    deconvolution, and component registration across multiple days. It is
    suitable for both two-photon and one-photon fluorescence microscopy data,
    and can be run in both batch and online mode.
  doc_url: http://caiman.readthedocs.io
  dev_url: https://github.com/flatironinstitute/CaImAn

extra:
  recipe-maintainers:
    - pgunn
    - epnev
    - zbarry
