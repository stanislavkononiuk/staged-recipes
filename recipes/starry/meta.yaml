{% set name = "starry" %}
{% set version = "0.1.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  # If getting the source from GitHub remove the line above
  # uncomment the line below and modify as needed
  # url: https://github.com/simplejson/{{ name }}/archive/{{ version }}.tar.gz
  sha256: d58439c548433adcda98e695be53e526ba940a4b9c44fb9a05d92cd495cdd47f
  # sha256 is the prefered checksum -- you can get it for a file with:
  #  `openssl sha256 <file name>`.
  # You may need the openssl package, available on conda-forge
  #  `conda install openssl -c conda-forge``

build:
  number: 0
  script:
    - python -m pip install --no-deps --ignore-installed .  # [not win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
  host:
    - python
    - pip
    - pybind11
    - numpy
  run:
    - python
    - {{ pin_compatible('numpy') }}

test:
  imports:
    - starry
    - starry.grad
    - starry.multi
    - starry.maps

about:
  home: http://github.com/rodluger/starry
  license: GPL-3.0
  license_family: GPL
  license_file: LICENSE
  summary: 'Analytic occultation light curves for astronomy'
  description: |
    The starry code package enables the computation of light curves for various
    applications in astronomy including transits and secondary eclipses of
    exoplanets, light curves of eclipsing binaries, rotational phase curves of
    exoplanets, light curves of planet-planet and planet-moon occultations, and
    more.
  doc_url: https://rodluger.github.io/starry/
  dev_url: https://github.com/rodluger/starry

extra:
  recipe-maintainers:
    - dfm
    - rodluger
