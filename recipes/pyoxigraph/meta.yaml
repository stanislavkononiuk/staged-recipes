{% set version = "0.2.5" %}

package:
  name: pyoxigraph
  version: {{ version }}

source:
  url: https://github.com/oxigraph/oxigraph/archive/refs/tags/v{{ version }}.tar.gz
  sha256: f9855472dcf746f97d80cba36ae95abdfa0b0429932b527f7288371c858bc6a8

build:
  number: 0
  skip: true  # [py<36]

requirements:
  build:
    - {{ compiler('c') }}
    - rust
    - maturin >=0.11,<0.12
  host:
    - pip
    - python
  run:
    - python

test:
  source_files:
    - python/tests
  imports:
    - pyoxigraph
  commands:
    - pip check
    - cd python/tests
    - pytest -vv --cov pyoxigraph --cov-report term-missing:skip-covered --cov-fail-under 100
  requires:
    - pip
    - pytest-cov

about:
  home: https://oxigraph.org/pyoxigraph
  summary: Python bindings of Oxigraph, a SPARQL database and RDF toolkit
  license: Apache-2.0 OR MIT
  license_file:
  - LICENSE-APACHE
  - LICENSE-MIT
  dev_url: https://github.com/oxigraph/oxigraph/tree/master/python
  doc_url: https://oxigraph.org/pyoxigraph
  doc_source_url: https://github.com/oxigraph/oxigraph/tree/v{{ version }}/python/docs

extra:
  recipe-maintainers:
    - bollwyvl
