{% set version = "1.2.1" %}

package:
    name: wordcloud
    version: {{ version }}

source:
    url: https://github.com/amueller/word_cloud/archive/{{ version }}.tar.gz
    fn: wordcloud-{{ version }}.tar.gz
    sha256: 936266403526943c8649bdc9bc6167e8c7eaba12e56f8ab286d1920617cef44e
    patches:
      - cli_patch.patch

build:
    number: 0
    script:
      # FIXME: This is a hack to make sure the environment is activated.
      # The reason this is required is due to the conda-build issue
      # mentioned below.
      #
      # https://github.com/conda/conda-build/issues/910
      #
      - source activate "${CONDA_DEFAULT_ENV}"  # [unix]
      - python setup.py install

    entry_points:
        - wordcloud = wordcloud.wordcloud_cli:run

requirements:
    build:
        - python
        - toolchain

    run:
        - python
        - pillow
        - numpy


test:
    imports:
        - wordcloud
    commands:
        - wordcloud -h

about:
    home: https://github.com/amueller/word_cloud
    license: MIT
    summary: A little word cloud generator in Python

extra:
    recipe-maintainers:
        - amueller
        - ericdill
