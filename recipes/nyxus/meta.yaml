package:
    name: nyxus
    version: {{ GIT_DESCRIBE_TAG }}
  
  source:
    url: https://github.com/PolusAI/nyxus/archive/refs/heads/main.zip
  
  
  build:
    skip: true  # [py<36]
    number: 0
    string: {{ GIT_BUILD_STR }}
  
  
  requirements:
    build:
      - python {{PY_VER}}
      - cmake
      - git
      - z5py 
      - libtiff 
      - boost 
      - nlohmann_json 
      - blosc 
      - pybind11 
      - xtensor 
      - xsimd 
      - pandas 
      - compilers =1.1.1 # [linux]
      - cudatoolkit =11.0.3 # [linux]
      - cudatoolkit-dev =11.0.3 # [linux]
      - m2-patch  # [win]
      - compilers # [mac]
      - cudatoolkit # [win]
      - cudatoolkit-dev # [win]
  
    run:
      - python {{PY_VER}}
      - libtiff 
      - blosc 
      - {{ pin_compatible('numpy') }}y 
      - pandas
      - pytest
      - requests
      - cudatoolkit =11.0.3 # [linux]
      - cudatoolkit-dev =11.0.3 # [linux]
      - cudatoolkit # [win]
      - cudatoolkit-dev # [win]
  
  test:
    imports:
      - nyxus
    source_files:
      - tests/python/*.py
    commands:
      - python -m pytest tests/python 

  about:
  home: https://github.com/PolusAI/nyxus
  summary: 'Scalable library for calculating features from intensity-label image data'
  license: MIT
  license_family: MIT
  license_file: LICENSE.txt
  doc_url: https://nyxus.readthedocs.io/en/latest/
  dev_url: https://github.com/PolusAI/nyxus

extra:
  recipe-maintainers:
    - sameeul