# Note: there are many handy hints in comments in this example -- remove them when you've finalized your recipe

# Jinja variables help maintain the recipe as you'll update the version only here.
{% set name = "Adept" %}
{% set version = "git-d0c821e" %}
{% set build number = "0"}
{% set sha256 = "1aa7e841e19067dfc8e07e22a985727278d857a651934feb2132603fc10b4799" %}
# sha256 is the prefered checksum -- you can get it for a file with:
#  `openssl sha256 <file name>`.
# You may need the openssl package, available on conda-forge
#  `conda install openssl -c conda-forge``

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: https://github.com/rjhogan/Adept/archive/master.tar.gz
  sha256: {{ sha256 }}

build:
  number: {{ build_number }}
  skip: True # [win]

requirements:
  build:
    - toolchain
  run:
    - openmp

test:
  commands:
    - test -f $PREFIX/lib/libadept.so
    - test -f $PREFIX/lib/libadept.a
    - test -f $PREFIX/include/adept.h

about:
  home: http://www.met.reading.ac.uk/clouds/adept/
  # Remember to specify the license variants for BSD, Apache, GPL, and LGLP.
  # Prefer the short version, e.g: GPL-2.0 instead of GNU General Public License version 2.0
  # See https://opensource.org/licenses/alphabetical
  license: Apache-2.0
  # The license_family, i.e. "BSD" if license is "BSD-3-Clause". (optional)
  license_family: Apache
  # It is strongly encouraged to include a license file in the package,
  # (even if the license doesn't require it) using the license_file entry.
  # See http://conda.pydata.org/docs/building/meta-yaml.html#license-file
  license_file: LICENSE.txt
  summary: 'Simple, fast, extensible JSON encoder/decoder for Python'

  # The remaining entries in this section are optional, but recommended
  description: |
    Adept (Automatic Differentiation using Expression Templates) is a free C++
    software library that enables algorithms to be automatically differentiated,
    very useful for a wide range of applications that involve mathematical
    optimization. It uses an operator overloading approach, so very little code
    modification is required. Moreover, the way that expression templates have been
    used and several other important optimizations mean that reverse-mode
    differentiation is significantly faster than other C++ libraries that provide
    equivalent functionality.

    The fundamental object of most mathematical software is the array, and it is
    therefore natural to want to differentiate array expressions. There are numerous
    mature C++ array libraries that support a wide variety of array operations, but
    because they also use expression templates to optimize array expressions, they
    do not work efficiently with Adept. The solution provided in version 2 of
    Adept is to use a single expression-template framework that incorporates both
    array and automatic-differentiation capabilities at a low level, thus enabling
    efficient differentiation of array expressions. Arrays of up to 7 dimensions are
    supported along with matrix multiplication and basic linear algebra operations.
    Of course, the library also works well with passive arrays (those that do not
    need to be differentiated).

  doc_url: http://www.met.reading.ac.uk/clouds/adept/documentation.html
  dev_url: https://github.com/rjhogan/Adept

extra:
  recipe-maintainers:
    - arghdos
