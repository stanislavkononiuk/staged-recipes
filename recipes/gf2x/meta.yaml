{% set version = "1.1" %}
{% set name = "gf2x" %}

package:
  name: {{ name }}
  version: {{ version }}

source:
  fn: {{ name }}-{{ version }}.tar.gz
  url: http://gforge.inria.fr/frs/download.php/file/30873/{{ name }}-{{ version }}.tar.gz
  sha256: 0d3f01604680102a00ca34e079903cc4d5a3208afda223748979b724d358849f
  patches:
    # patches from https://github.com/sagemath/sage
    - patches/0004-Add-disable-hardware-specific-code.patch
    - patches/0006-Fix_make_check_not_failing_on_errors.patch

build:
  number: 0
  skip: true        # [win]

requirements:
  build:
    - toolchain
    - libtool
    - automake

test:
  commands:
    - test -f $PREFIX/include/gf2x.h
    - test -f $PREFIX/lib/lib{{ name }}.a
    - test -f $PREFIX/lib/lib{{ name }}.so         # [linux]
    - test -f $PREFIX/lib/lib{{ name }}.dylib      # [osx]

about:
  home: http://gf2x.gforge.inria.fr
  dev_url: http://gforge.inria.fr/projects/gf2x/
  license: GPL v2+
  license_file: COPYING
  description: |
    gf2x is a C/C++ software package containing routines for fast arithmetic
    in GF(2)[x] (multiplication, squaring, GCD) and searching for
    irreducible/primitive trinomials.

extra:
  recipe-maintainers:
    - isuruf
