{% set name = "kivy" %}
{% set version = "1.10.1" %}
{% set sha256 = "794e45cc7bcc7882f7cd95f1673bc6701f3215a20a54c915cac0c5e46a449b4c" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/kivy/{{ name }}/archive/{{ version }}.tar.gz
  sha256: {{ sha256 }}

build:
  number: 0
  skip: True  # [py < 35]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - python
    - pip
    - nose
    - setuptools
    - {{ pin_compatible('cython', lower_bound='0.23', upper_bound='0.28.2') }}
    - sdl2
    - sdl2_mixer
    - sdl2_image
    - sdl2_ttf
    - pkgconfig
    - msinttypes  # [win]
    - gstreamer  # [linux or osx]
    - gst-plugins-base  # [linux or osx]
    - xorg-libx11  # [linux]
    - glew  # [win]
    - pyopengl  # [linux]
    - mesa  # [linux]
    - xorg-libxrender  # [linux]
    - xvfbwrapper  # [linux]
  host:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - python
    - pip
    - nose
    - setuptools
    - {{ pin_compatible('cython', lower_bound='0.23', upper_bound='0.28.2') }}
    - sdl2
    - sdl2_mixer
    - sdl2_image
    - sdl2_ttf
    - pkgconfig
    - msinttypes  # [win]
    - gstreamer  # [linux or osx]
    - gst-plugins-base  # [linux or osx]
    - xorg-libx11  # [linux]
    - glew  # [win]
    - pyopengl  # [linux]
    - mesa  # [linux]
    - xorg-libxrender  # [linux]
    - xvfbwrapper  # [linux]
  run:
    - python
    - sdl2
    - sdl2_mixer
    - sdl2_image
    - sdl2_ttf
    - xorg-libx11  # [0]
    - glew  # [win]
    - docutils
    - pillow
    - pygments

test:
  imports:
    - kivy
    - kivy.properties
  commands:
    - export KIVY_GL_BACKEND=mock  # [not win]
    - set KIVY_GL_BACKEND=mock  # [win]
  requires:
    - nose
    - xvfbwrapper  # [linux]
    - gstreamer  # [not win]
    - gst-plugins-base  # [not win]
    - xorg-libxrender  # [linux]
    - xvfbwrapper  # [linux]
    - ffmpeg  # [linux]
  source_files:
    - examples
    - kivy/tests

about:
  home: http://kivy.org/
  license: MIT
  license_family: MIT
  license_file: LICENSE
  summary: 'Open source UI framework written in Python, running on Windows, Linux, macOS, Android and iOS.'

  description: |
    Kivy is an open source, cross-platform Python framework for the development of
    applications that make use of innovative, multi-touch user interfaces. The aim
    is to allow for quick and easy interaction design and rapid prototyping whilst
    making your code reusable and deployable.
  doc_url: https://kivy.org/docs/gettingstarted/intro.html
  dev_url: https://github.com/kivy/kivy

extra:
  recipe-maintainers:
    - matham
