{% set name = "pyopenrivercam" %}
{% set version = "0.2.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/localdevices/pyorc/archive/refs/tags/v0.2.1.tar.gz
  sha256: 985d4afff0a38384ead1076c89e1a86c75225b4f19bb00d1ee57e324caff8ab2
build:
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('mesa-libegl-devel') }}  # [linux]
    - {{ cdt('mesa-dri-drivers') }}  # [linux]
    - {{ cdt('libselinux') }}        # [linux]
    - {{ cdt('libxdamage') }}        # [linux]
    - {{ cdt('libxfixes') }}         # [linux]
    - {{ cdt('libxxf86vm') }}        # [linux]

  run:
    - python
    - cartopy
    - descartes
    - geojson
    - geopandas
    - geos
    - gitpython
    - jupyter
    - matplotlib
    - netCDF4
    - numpy
    - opencv
    - openpiv
    - pip
    - pyproj
    - pytest
    - rasterio
    - requests
    - scikit-image
    - scipy
    - shapely
    - tqdm
    - watermark
    - xarray
  host:
    - python
    - pip
#    - libgl1-mesa-glx
    - ffmpeg                         # [not win]
    - glib                           # [unix]
    - xorg-libxfixes                 # [linux]
test:
  imports:
    - pyorc
  requires:
    - pip
  commands:
    - pip check

about:
  home: https://pypi.org/project/pyopenrivercam/
  summary: 'Measure river and stream's surface velocity and river flow from UAV, smartphone or IP camera videos'
  description: |
    pyOpenRiverCam is an open-source API for estimating surface velocity and river flow from IP, drone or smartphone camera
    videos. It performs preprocessing, surface velocity estimation, spurious velocity filtering, cross section sampling, 
    infilling of missings, and integration to discharge. A user only needs to perform light field work and collect 
    videos. It is pure python code and therefore easy to take up in your own software project or perform research with or
    develop new features.
  license: GPL-3.0-only
  license_family: GPL
  license_file: LICENSE
  doc_url: https://localdevices.github.io/pyorc
  dev_url: https://github.com/localdevices/pyorc

extra:
  recipe-maintainers:
    - hcwinsemius
