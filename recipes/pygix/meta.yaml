{% set name = "pygix" %}
{% set version = "2021.10.06" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/NSLS-II-SMI/pygix/archive/refs/tags/{{ version }}.tar.gz
  sha256: b98e44bca1afbdd33b8411542d49bb1edad658630dc85814882b712736aa880d
  patches:
    - 0001-Fix-print-statements.patch

build:
  number: 0
  noarch: python
  script: {{ PYTHON }} -m pip install . -vv

requirements:
  host:
    - python >=3.6
    - pip
    - numpy
  run:
    - python >=3.6
    - cython
    - fabio
    - numpy
    - pyfai
    - pyyaml
    # Note: the sphinx dependencies are listed in the project's
    # `requirements.txt` file. They are only optionally used in `setup.py`, and
    # not used in the main code base. So, commenting them out:
    # - sphinx
    # - sphinxcontrib-programoutput

test:
  imports:
    - pygix
    - pygix.grazing_geometry
    - pygix.grazing_units
    - pygix.io
    - pygix.lattice
    - pygix.plotting
    - pygix.process
    - pygix.tools
    - pygix.transform
  requires:
    - pip
  commands:
    - pip check

about:
  home: https://github.com/tgdane/pygix
  summary: A python library for reduction of 2-dimensional grazing-incidence and fibre diffraction data
  license: MIT
  license_file: LICENSE
  dev_url: https://github.com/NSLS-II-SMI/pygix

extra:
  recipe-maintainers:
    - mrakitin
