{% set name = "topologytoolkit" %}
{% set version = "0.9.8.dev54" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/topology-tool-kit/ttk/archive/8306ff030f1d566a017c20b79f68fb5b4e42c1d5.zip
  sha256: 285b5cf2003892dfae0a02e600a5d1d1cc624fe44bfc5c987999cee8416f93d1

build:
  number: 0
  skip: True  # [win]

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - ninja
    - {{ cdt('mesa-libgl-devel') }}  # [linux]
    - {{ cdt('libxi-devel') }}  # [linux]
  host:
    - python
    - vtk
    - tbb-devel
    - boost-cpp
    - zlib
    - graphviz
    - sqlite
  run:
    - python
    - vtk
    - zlib
    - graphviz
    - sqlite

test:
  imports:
    - topologytoolkit
  source_files:
    - examples/data/inputData.vtu
    - examples/python/example.py
  commands:
    - python examples/python/example.py examples/data/inputData.vtu

about:
  home: https://topology-tool-kit.github.io/
  license_file: LICENSE
  summary: >
    The Topology ToolKit (TTK) is an open-source library and software
    collection for topological data analysis and visualization. 
  description: |
    TTK can handle scalar data defined either on regular grids or
    triangulations, in 2D, 3D, or more. It provides a substantial collection
    of generic, efficient and robust implementations of key algorithms in
    topological data analysis. It includes:
    · For scalar data: critical points, integral lines, persistence diagrams,
      persistence curves, merge trees, contour trees, Reeb graphs, Morse-Smale
      complexes, topological simplification, topology-aware compression,
      harmonic design;
    · For bivariate scalar data: fibers, fiber surfaces, continuous
      scatterplots, Jacobi sets, Reeb spaces;
    · For uncertain scalar data: mandatory critical points;
    · For time-varying scalar data: critical point tracking, nested tracking
      graphs;
    · For high-dimensional / point cloud data: dimension reduction,
      persistence-based clustering;
    · and more!

extra:
  recipe-maintainers:
    - lhofmann
    - julien-tierny
