{% set name = "openconnect-sso" %}
{% set version = "0.8.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/vlaci/openconnect-sso/releases/download/v{{ version }}/openconnect-sso-{{ version }}.tar.gz
  sha256: a7bde0a8dd35d7bab3c66f28b420c343c270a7ee45e98e04bfa6ecc6958f5c5b

build:
  skip: True  # [not unix]
  script: {{ PYTHON }} -m pip install . --no-deps -vv
  number: 0
  entry_points:
    - openconnect-sso = openconnect_sso.cli:main

requirements:
  build:
    - poetry >=0.12
  host:
    - python
    - pip
    - poetry >=0.12
  run:
    - python
    - attrs >=18.2
    - {{ pin_compatible("colorama", lower_bound="0.4") }}
    - {{ pin_compatible("importlib-metadata", lower_bound="3.10.0") }}  # [py<38]
    - {{ pin_compatible("lxml", lower_bound="4.3") }}
    - keyring >=21.1,<24.0
    - {{ pin_compatible("prompt-toolkit", lower_bound="3.0.3") }}
    - pyxdg >=0.26,<0.28
    - {{ pin_compatible("requests", lower_bound="2.22") }}
    - structlog >=20.1
    - {{ pin_compatible("toml", lower_bound="0.10") }}
    - {{ pin_compatible("pysocks", lower_bound="1.7.1") }}
    - pyqt >=5.12
    - pyqtwebengine >=5.12
    - openconnect

test:
  imports:
    - openconnect_sso
  commands:
    - openconnect-sso --help

about:
  home: https://github.com/vlaci/openconnect-sso
  summary: Wrapper script for OpenConnect supporting Azure AD (SAMLv2) authentication to Cisco SSL-VPNs
  license: GPL-3.0-or-later
  license_family: GPL
  license_file: LICENSE
  dev_url: https://github.com/vlaci/openconnect-sso

extra:
  recipe-maintainers:
    - leofang
