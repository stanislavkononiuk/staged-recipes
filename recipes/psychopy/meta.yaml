{% set name = "psychopy" %}
{% set version = "3.1.2" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  sha256: e54c9582dde91652703077c9b23555cf22ad04429f2cc20c98dd16489c13eb55

build:
  number: 0
  script: "{{ PYTHON }} -m pip install . -vv"
  entry_points:
    - psychopy = psychopy.app.psychopyApp:main

requirements:
  host:
    - python
    - pip
  run:
    - python
    - python.app
    - cffi
    - configobj
    - freetype-py
    - future
    - gevent
    - greenlet
    - hdf5
    - imageio >=2.5
    - imageio-ffmpeg
    - json_tricks
    - matplotlib
    - moviepy
    - msgpack-numpy
    - msgpack-python
    - numpy
    - opencv
    - openpyxl
    - pandas
    - pillow
    - psutil
    - pyglet >=1.3
    - pyobjc-core  # [osx]
    - pyobjc-framework-quartz  # [osx]
    - pyopengl
    - pyosf
    - pyqmix >=2018.12.13  # [not linux]
    - pyqt
    - pyserial
    - pysoundfile
    - pytables
    - python-bidi
    - python-gitlab
    - python-sounddevice
    - pywin32  # [win]
    - pyWinhook  # [win]
    - pyyaml
    - pyzmq
    - requests
    - scipy
    - wxpython !=4.0.2, !=4.0.3
    - xlrd

test:
  imports:
    - psychopy
    - psychopy.app
    - psychopy.data
    - psychopy.event
    - psychopy.experiment
    - psychopy.gui
    - psychopy.hardware
    - psychopy.monitors
    - psychopy.preferences
    - psychopy.sound
    - psychopy.visual
  commands:
    - "psychopy --version"


about:
  home: https://www.psychopy.org
  license: GPL-3.0
  license_family: GPL
  license_file: LICENSE
  summary: 'Psychology experiment software in Python'
  description: |
    PsychoPy is an open-source package for creating psychology stimuli in
    Python (A real and free alternative to Matlab). PsychoPy combines the
    graphical strengths of OpenGL with the easy Python syntax to give
    psychophysics a free and simple stimulus presentation and control package.
    an optional C extension for a serious speed boost.
  doc_url:  https://www.psychopy.org/documentation.html
  dev_url: https://github.com/psychopy/psychopy

extra:
  recipe-maintainers:
    - kastman
    - peircej
    - hoechenberger
