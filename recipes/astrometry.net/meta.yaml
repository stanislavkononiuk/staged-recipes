{% set name = "astrometry.net" %}
{% set version = "0.78" %}

package:
  name: {{ name|lower}}
  version: {{ version }}

source:
  fn: {{name}}-{{ version }}.zip
  url: https://github.com/dstndstn/astrometry.net/archive/{{ version }}.zip
  sha256: 85480b9636757c89ef5ccc7aac557409ac2ab377eb6c6eca862b16cdd4faefd9

build:
  number: 0
  skip: True  # [osx or win]

requirements:
  build:
    - swig
    - {{ compiler('c') }}
    - git
    - make
    - {{ cdt('libx11-devel') }}  # [linux]
    - {{ cdt('libxau-devel') }}  # [linux]
    - {{ cdt('libxext-devel') }}  # [linux]
    - {{ cdt('libxrender-devel') }}  # [linux]
    - {{ cdt('xorg-x11-proto-devel') }}  # [linux]
    - zlib
    - jpeg
    - netpbm
    - libpng
    - cfitsio
    - astropy
    - numpy
    - bzip2
    - cairo
    - gsl
  run:
    - zlib
    - jpeg
    - netpbm
    - libpng
    - cfitsio
    - astropy
    - numpy
    - bzip2
    - cairo
    - gsl

test:
  commands:
    - solve-field -h

about:
  home: http://astrometry.net/
  license: BSD
  license_file: LICENSE
  summary: Automatic recognition of astronomical images; or standards-compliant astrometric metadata from data.
  description: |
     If you have astronomical imaging of the sky with celestial coordinates you do not know—or do not
     trust—then Astrometry.net is for you. Input an image and we'll give you back astrometric
     calibration meta-data, plus lists of known objects falling inside the field of view
  doc_url: http://astrometry.net/doc/readme.html
  dev_url: https://github.com/dstndstn/astrometry.net/

extra:
  recipe-maintainers:
    - juliotux
