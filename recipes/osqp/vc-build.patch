diff --git a/setup.py b/setup.py
index f314ebf..da8d0aa 100644
--- a/setup.py
+++ b/setup.py
@@ -15,12 +15,8 @@
 cmake_args = ["-DUNITTESTS=OFF"]
 define_macros = []
 
-# Check if windows linux or mac to pass flag
-if system() == 'Windows':
-    cmake_args += ['-G', 'MinGW Makefiles']
-
-else:  # Linux or Mac
-    cmake_args += ['-G', 'Unix Makefiles']
+# use conda-defined cmake generator
+cmake_args += ['-G', os.environ['CMAKE_GENERATOR']]
 
 # Pass Python option to CMake and Python interface compilation
 cmake_args += ['-DPYTHON=ON']
@@ -66,9 +62,8 @@
     libraries += ['legacy_stdio_definitions']
 
 # Add OSQP compiled library
-lib_ext = '.a'
-extra_objects = [os.path.join('extension', 'src',
-                 'libosqpstatic%s' % lib_ext)]
+lib_name = 'osqpstatic.lib' if system() == 'Windows' else 'libosqpstatic.a'
+extra_objects = [os.path.join('extension', 'src', lib_name)]
 
 
 '''
@@ -157,7 +152,6 @@ def build_extensions(self):
         os.chdir(current_dir)
 
         # Copy static library to src folder
-        lib_name = 'libosqpstatic%s' % lib_ext
         lib_origin = os.path.join(osqp_build_dir, 'out', lib_name)
         copyfile(lib_origin, os.path.join('extension', 'src', lib_name))
 
