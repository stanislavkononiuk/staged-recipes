# The version 4.2 while the last one released,
# Really doesn't play well with new systems like conda
{% set version = "4.3.0" %}

package:
  name: enblend
  version: {{ version }}

source:
  # No new release in 4 years
  # https://sourceforge.net/p/enblend/discussion/420370/thread/f6e8d6d9/
  #hg_url: http://hg.code.sf.net/p/enblend/code
  url: https://phoenixnap.dl.sourceforge.net/project/enblend/enblend-enfuse/enblend-enfuse-4.2/enblend-enfuse-4.2.tar.gz
  sha256: 8703e324939ebd70d76afd350e56800f5ea2c053a040a5f5218b2a1a4300bd48
  patches:
    - 4.3-unreleased.patch
    - experimental_filesystem.patch

build:
  skip: true  # [not linux]
  number: 0

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - cmake
    - make
    - mercurial
  host:
    - mercurial
    - libpng
    - jpeg
    - libtiff
    - lcms2
    - openexr
    - mercurial
    - gsl
    - boost
    - vigra
    - libblas
  run:
    - vigra
    - gsl

test:
  commands:
    - enblend --help
    - enfuse --help

about:
  home: http://enblend.sourceforge.net/
  license: GPL-2.0-only
  license_family: GPL
  license_file: COPYING
  summary: Enblend combines images that overlap like this into a single large image with no seams.

  description: |
    Enblend blends away the seams in a panoramic image mosaic using a
    multi-resolution spline. Enfuse merges different exposures of the same
    scene to produce an image that looks much like a tone-mapped image.
  doc_url: https://sourceforge.net/p/enblend/_list/hg

extra:
  recipe-maintainers:
    - hmaarrfk
